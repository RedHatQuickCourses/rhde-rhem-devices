<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lab: Configure Edge Devices :: Deploying Red Hat Edge Manager and Managing Edge Devices</title>
    <link rel="prev" href="s1-manage.html">
    <link rel="next" href="s3-update-lab.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">Deploying Red Hat Edge Manager and Managing Edge Devices</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/rhde-rhem-devices/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rhde-rhem-devices" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Deploying Red Hat Edge Manager and Managing Edge Devices</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../LABENV/index.html">Lab Environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../ch1-intro/index.html">Introduction to Red Hat Edge Manager</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../ch2-deploy/index.html">Install Red Hat Edge Manager as Quadlets</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ch2-deploy/s1-quadlets.html">Red Hat Edge Manager Services and Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ch2-deploy/s2-install-lab.html">Lab: Install Red Hat Edge Manager Standalone</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../ch3-enroll/index.html">Add Edge Devices to Red Hat Edge Manager</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ch3-enroll/s1-enroll.html">Enroll Edge Devices in RHEM</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ch3-enroll/s2-enroll-lab.html">Lab: Enroll Edge Devices Using Late Binding</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Manage Edge Devices with Red Hat Edge Manager</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="s1-manage.html">Manage Edge Devices with RHEM</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="s2-manage-lab.html">Lab: Configure Edge Devices</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="s3-update-lab.html">Lab: Update Edge Devices</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../ch5-decomission/index.html">Remove Edge Devices from Red Hat Edge Manager</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ch5-decomission/s1-delete.html">Decommission and Delete Edge Devices with RHEM</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ch5-decomission/s2-delete-lab.html">Lab: Decommission and Delete Edge Devices</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Deploying Red Hat Edge Manager and Managing Edge Devices</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Deploying Red Hat Edge Manager and Managing Edge Devices</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../samples/1/index.html">samples</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../samples/1/index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Deploying Red Hat Edge Manager and Managing Edge Devices</a></li>
    <li><a href="index.html">Manage Edge Devices with Red Hat Edge Manager</a></li>
    <li><a href="s2-manage-lab.html">Lab: Configure Edge Devices</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Lab: Configure Edge Devices</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><em>Estimated reading time: <strong>5 minutes</strong>.</em></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Objective</dt>
<dd>
<p>Configure managed devices by using inline configuration in their device specifications.</p>
</dd>
</dl>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Work in progress
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_before_you_begin"><a class="anchor" href="#_before_you_begin"></a>Before you begin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You need a customer portal account with access to a Red Hat Enterprise Linux (RHEL) subscription.
It could be a <a href="https://developers.redhat.com/products/rhel/download">Red Hat Developer program</a> free subscription.</p>
</div>
<div class="paragraph">
<p>You need a <em>development machine</em> running RHEL, which contains two test VMs already enrolled into your RHEM server by a <a href="../ch3-enroll/s2-enroll-lab.html" class="xref page">previous lab</a>.</p>
</div>
<div class="paragraph">
<p>You also need a <em>server machine</em> running RHEL, to which you also have unrestricted sudo access, which was already configured with RHEM.</p>
</div>
<div class="paragraph">
<p>Finally, you need a <em>private registry</em> to store bootc container images for your managed edge devices.</p>
</div>
<div class="paragraph">
<p>If you are using the course classroom, your <em>development machine</em> is the <code>workstation</code> VM.
Log in as the user <code>student</code> with password <code>student</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_instructions"><a class="anchor" href="#_instructions"></a>Instructions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>At the end of the previous lab, you had two managed devices which were provisioned from the same installation disk.
Right now, they have identical settings, among them a well-known SSH key, which is considered insecure because it&#8217;s available to any field personel with possess an installation media.
You will remediate this by configuring your managed devices with different SSH keys, provided as inline configurations in each device manifest.</p>
</div>
<div class="paragraph">
<p>Then you will exercise RHEM&#8217;s ability to detect and correct configuration drift, by making manual changes to configuration files, and observing that RHEM restores the configurations set for each device.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Verify that you have the outcomes of previous labs.
If you do not, go back and complete them, because you need their outcomes to continue with this course.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>There is a clone of the course samples repository on your home directory.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>cd</strong>
$ <strong>ls rhde-rhem-samples</strong>
LICENSE  README.md  antora.yml  enroll  modules  webapp</code></pre>
</div>
</div>
</li>
<li>
<p>There are two local test VMs, named <code>edge-1</code> and <code>edge-2</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>virsh list --all</strong>
 Id   Name     State
-------------------------
 -    edge-1   shut off
 -    edge-2   shut off</code></pre>
</div>
</div>
</li>
<li>
<p>If your test VMs are not started, because you stopped your classroom environment since completing the previous lab, start them now.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>virsh start edge-1</strong>
Domain 'edge-1' started
$ <strong>virsh start edge-2</strong>
Domain 'edge-2' started</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the <code>test-enroll</code> directory, which contains the Containerfile, kickstart script, and SSH key used to provision the two test VMs.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>cd temp-enroll</strong>
$ <strong>ls</strong>
Containerfile  bib-iso.sh  config.toml  config.yaml  edge-key  edge-key.pub  output  rhem-enroll.iso  virt-install.sh</code></pre>
</div>
</div>
</li>
<li>
<p>Log in on RHEM, as an administrator, and verify that there are two managed devices, which correspond to the two test VMs.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>flightctl login -u admin -p redhat https://servera.lab.example.com:3443</strong>
Login successful.
$ <strong>flightctl get device -o wide</strong>
NAME                                                    ALIAS   OWNER   SYSTEM  UPDATED         APPLICATIONS    LABELS
1u63hvsgtua9tjjbmla9bgh5h2s77cb8esepphnf68m3ocf8qfng    edge-1  &lt;none&gt;  Online  UpToDate        NoApplications  rhel=9.6,type=noapps,alias=edge-2
g7ombcqk46tqq458j9uju454441mf1lgt9qqqva8ti0fnvosm57g    edge-2  &lt;none&gt;  Unknown Unknown         Unknown         rhel=9.6,type=noapps,alias=edge-2</code></pre>
</div>
</div>
</li>
<li>
<p>Wait a few moments and repeat the latest command until both managed devices return as <code>OnLine</code> and <code>UpToDate</code>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Configure the second test VM using the RHEM web UI.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Open a web browser and visit <code>https://servera.lab.example.com</code></p>
</li>
<li>
<p>Log in as the <code>student</code> user with the <code>student</code> password.
Notice we are NOT using the <code>admin</code> user, because you do NOT require full administrator privileges on RHEM to manage devices.</p>
<div class="paragraph">
<p>GRAB SCREENSHOT</p>
</div>
</li>
<li>
<p>On the left panel, click <strong>Devices</strong> and click the icon with three vertical icons in the row of the <code>edge-2</code> device.
Then click <strong>Edit device configurations</strong>.
NOTE: The same option is available from the <strong>Actions</strong> button in the device details page.</p>
<div class="paragraph">
<p>GRAB SCREENSHOT</p>
</div>
</li>
<li>
<p>On the <strong>General info</strong> tab of the <strong>Edit device</strong> page, click <strong>Next</strong>.</p>
<div class="paragraph">
<p>GRAB SCREENSHOT</p>
</div>
</li>
<li>
<p>On the <strong>Device template</strong> tab, click <strong>Add configuration</strong> and fill the form as follows:</p>
<div class="openblock">
<div class="content">
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p><strong>Source name</strong>: <code>ssh-key</code></p>
</li>
<li>
<p><strong>Source type</strong>: <code>Inline configuration</code></p>
</li>
</ol>
</div>
</div>
</div>
<div class="paragraph">
<p>GRAB SCREENSHOT</p>
</div>
</li>
<li>
<p>When you select the source type, the page expands to show the <strong>File 1</strong> heading with a couple additional fields.
Leave the form as it is, do not click anywhere else, because we have to generate the content for the ssk-key file.</p>
</li>
<li>
<p>Now switch from the web browser to a terminal, but do NOT close your web browser, and run the following command to create a new SSH key pair which is exclusive to the second device.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>ssh-keygen -N '' -f edge-2-key -C 'key for the edge-2 managed device'</strong>
Generating public/private rsa key pair.
...</code></pre>
</div>
</div>
</li>
<li>
<p>Display the public key file and copy its contents to the clipboard, so you can paste it on your web browser.
Of course, your SSH key will have different contents than the ones listed here.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>cat edge-2-key.pub</strong>
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAILy6lU52yOY7IZ2BFpQhCQaQNBvyo1ydbsd5uyzPZBNq key for the edge-2 managed device</code></pre>
</div>
</div>
</li>
<li>
<p>When you select the source type, the page expands to show the <strong>File 1</strong> heading with a couple additional fields.
Fill them as follows:</p>
<div class="openblock">
<div class="content">
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p><strong>File path on the device</strong>: <code>/home/core/.ssh/authorized_keys</code></p>
</li>
<li>
<p><strong>Content</strong>: &lt;paste here the contents of your SSH key public file&gt;</p>
</li>
</ol>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Instead of doing cut-and-paste from the terminal to the web browser, you could use the <strong>Browse</strong> button to select the <code>~/temp/enroll/edge-2-key.pub</code> file in the <strong>Content</strong> field.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>GRAB SCREENSHOT</p>
</div>
</li>
<li>
<p>Scroll down, not changing any of the other fields from <strong>File 1</strong>, and click <strong>Add configuration</strong> again.</p>
<div class="paragraph">
<p>You could add multiple files to the same configuration, but when the files are not directly related to each other, it improves readability and maintainability of the configuration having files as distinct inline configuration items.</p>
</div>
</li>
<li>
<p>fill the fields inside <strong>Configuration 2</strong> as follows:</p>
<div class="openblock">
<div class="content">
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p><strong>Source name</strong>: <code>motd</code></p>
</li>
<li>
<p><strong>Source type</strong>: <code>Inline configuration</code></p>
</li>
</ol>
</div>
</div>
</div>
<div class="paragraph">
<p>GRAB SCREENSHOT</p>
</div>
</li>
<li>
<p>And fill the fields from the new <strong>File 1</strong> panel as follows:</p>
<div class="openblock">
<div class="content">
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p><strong>File path on the device</strong>: <code>/etc/motd</code></p>
</li>
<li>
<p><strong>Content</strong>: <code>Under new management!</code></p>
</li>
</ol>
</div>
</div>
</div>
<div class="paragraph">
<p>GRAB SCREENSHOT</p>
</div>
</li>
<li>
<p>Do not make any change to applications nor services, and click <strong>Next</strong></p>
</li>
<li>
<p>On the <strong>Updates</strong> tab, leave <strong>Use basic configurations</strong> checked, and click <strong>Next</strong></p>
</li>
<li>
<p>On the <strong>Review and save</strong> tab, verify that two configurations are listed, named <code>hostname</code> and <code>motd</code>, and click <strong>Save</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Verify that the managed device synchronizes with RHEM and receives the new configurations.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>After clicking <strong>Save</strong>, you are in the details page for the <code>edge-2</code> device.
Its <strong>System status</strong> panel should display an <strong>Update status</strong> of <code>Out-of-date</code>.</p>
<div class="paragraph">
<p>GRAB SCREENSHOT</p>
</div>
</li>
<li>
<p>Wait until the <strong>Update status</strong> changes to <code>Up-to-date</code> and switch to a terminal window.</p>
<div class="paragraph">
<p>GRAB SCREENSHOT</p>
</div>
</li>
<li>
<p>Open a SSH session using the new key.</p>
<div class="paragraph">
<p>Notice that, if you reuse a previous <code>ssh</code> command from your history, you would use the old key and it would ask for the password for the <code>core</code> user.
Also notice the message from <code>/etc/motd</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>ssh -i edge-2-key -p 8222 core@127.0.0.1</strong>
Under new management!
Last login: Thu Dec 18 20:03:46 2025 from 172.25.250.254
[core@enroll ~]$</code></pre>
</div>
</div>
</li>
<li>
<p>Logs from the RHEM agent would indicate there was a reconciliation of the device configuration.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>sudo journalctl -u flightctl-agent | tail -n 2</strong>
Dec 18 20:02:52 enroll flightctl-agent[820]: time="2025-12-18T20:02:52.191095Z" level=info msg="Version updated from '13' to '14'"
Dec 18 20:03:22 enroll flightctl-agent[820]: time="2025-12-18T20:03:22.434238Z" level=info msg="Spec reconciliation complete: current version 14"</code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Change a configuration file and verify that RHEM will undo your edits.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If you didn&#8217;t notice on your lastest SSH log in, there is "a message of day".</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>cat /etc/motd</strong>
Under new management!</code></pre>
</div>
</div>
</li>
<li>
<p>Change it to something else.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>sudo bash -c "echo 'Sysadmin doing nasty things' &gt; /etc/motd"</strong>
$ <strong>cat /etc/motd</strong>
Sysadmin doing nasty things</code></pre>
</div>
</div>
</li>
<li>
<p>Also change the system time zone.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>timedatectl show -p Timezone</strong>
Timezone=UTC
$ <strong>sudo timedatectl set-timezone "Europe/Rome"</strong>
$ timedatectl show -p Timezone
Timezone=Europe/Rome</code></pre>
</div>
</div>
</li>
<li>
<p>Wait a few moments and verify that the message reverts to the one set by RHEM.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>cat /etc/motd</strong>
Under new management!</code></pre>
</div>
</div>
</li>
<li>
<p>Notice that the time zone change will NOT revert, because RHEM is not managing the file <code>/etc/localtime</code>, so you must revert that change manually.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ timedatectl show -p Timezone
Timezone=Europe/Rome
$ <strong>sudo timedatectl set-timezone UTC</strong></code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Apply similar configurations to the <code>edge-1</code> managed device, but this time using the CLI.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Copy and inspect the template manifest from the course samples repository.</p>
<div class="paragraph">
<p>If you compare it with the complete YAML manifest form devices, which you already saw in the previous lab, you will notice the absense of some metadata fields and of all status fields.
Manifests which you apply should focus on the device specification, and provide just the device UUID and labels on its metadata.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>cp ../rhde-rhem-samples/config/edge-1.yaml .</strong>
$ <strong>less edge-1.yaml</strong>
apiVersion: flightctl.io/v1beta1
kind: Device
metadata:
  labels:
    alias: edge-1
    rhel: "9.6"
    type: noapps
  name: REPLACE_WITH_UUID
spec:
  config:
  - inline:
    - content: |
        REPLACE_WITH_SSH_KEY
      mode: 420
      path: /home/core/.ssh/authorized_keys
    name: ssh-key
  - inline:
    - content: Under new management!
      path: /etc/motd
    name: motd</code></pre>
</div>
</div>
</li>
<li>
<p>Generate an SSH key for the device.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>ssh-keygen -N '' -f edge-1-key -C 'key for the edge-1 managed device'</strong>
Generating public/private rsa key pair.
...</code></pre>
</div>
</div>
</li>
<li>
<p>Insert the correct UUID for the device in the manifest</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>UUID=$( flightctl get device -o name -l alias=edge-1 )</strong>
$ <strong>echo $UUID</strong>
1u63hvsgtua9tjjbmla9bgh5h2s77cb8esepphnf68m3ocf8qfng
$ <strong>sed -i "s|REPLACE_WITH_UUID|$UUID|" edge-1.yaml</strong></code></pre>
</div>
</div>
</li>
<li>
<p>Insert the new SSH key in the manifest.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>SSH_PUB_KEY=$( cat edge-1-key.pub )</strong>
$ <strong>sed -i "s|REPLACE_WITH_SSH_KEY|$SSH_PUB_KEY|" edge-1.yaml</strong></code></pre>
</div>
</div>
</li>
<li>
<p>Review the <code>edge-1.yaml</code> manifest file and verify that it contains no more <code>REPLACE_WITH</code> markers.</p>
</li>
<li>
<p>Apply the manigest on RHEM.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>flightctl apply -f edge-1.yaml</strong>
edge-1.yaml: applying device/1u63hvsgtua9tjjbmla9bgh5h2s77cb8esepphnf68m3ocf8qfng: 200 OK</code></pre>
</div>
</div>
</li>
<li>
<p>Wait until the device synchonizes with RHEM.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>flightctl get device $UUID -o wide</strong>
NAME                                                    ALIAS   OWNER   SYSTEM  UPDATED         APPLICATIONS    LABELS
1u63hvsgtua9tjjbmla9bgh5h2s77cb8esepphnf68m3ocf8qfng    edge-1  &lt;none&gt;  Online  OutOfDate        NoApplications  alias=edge-1,rhel=9.6,type=noapp
...
$ <strong>flightctl get device $UUID -o wide</strong>
NAME                                                    ALIAS   OWNER   SYSTEM  UPDATED         APPLICATIONS    LABELS
1u63hvsgtua9tjjbmla9bgh5h2s77cb8esepphnf68m3ocf8qfng    edge-1  &lt;none&gt;  Online  UpToDate        NoApplications  alias=edge-1,rhel=9.6,type=noapp</code></pre>
</div>
</div>
</li>
<li>
<p>Verify that the device actually contains the new configurations, by starting an SSH session using the newly generated key.</p>
<div class="paragraph">
<p>Also remember that, in the previous lab, you created the file <code>/root/device.txt</code> only in the <code>edge-1</code> test VM.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>ssh -i edge-1-key -p 8122 core@127.0.0.1</strong>
Under new management!
[core@enroll ~]$ <strong>sudo ls /root</strong>
anaconda-ks.cfg  buildinfo  device.txt  original-ks.cfg
[core@enroll ~]$ <strong>exit</strong></code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_whats_next"><a class="anchor" href="#_whats_next"></a>What&#8217;s next</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the next activity, you will update devices with a new RHEL release, by updating their bootc container image.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="s1-manage.html">Manage Edge Devices with RHEM</a></span>
  <span class="next"><a href="s3-update-lab.html">Lab: Update Edge Devices</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
