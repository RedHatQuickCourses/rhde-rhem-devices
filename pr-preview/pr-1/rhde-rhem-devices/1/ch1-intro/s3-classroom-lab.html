<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lab: Prepare to Install Red Hat Edge Manager :: Deploying Red Hat Edge Manager and Managing Edge Devices</title>
    <link rel="prev" href="s1-architecture.html">
    <link rel="next" href="../ch2-deploy/index.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">Deploying Red Hat Edge Manager and Managing Edge Devices</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/rhde-rhem-devices/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rhde-rhem-devices" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Deploying Red Hat Edge Manager and Managing Edge Devices</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../LABENV/index.html">Lab Environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Introduction to Red Hat Edge Manager</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="s1-architecture.html">Managing Edge Devices with Red Hat Edge Manager</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="s3-classroom-lab.html">Lab: Prepare to Install Red Hat Edge Manager</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../ch2-deploy/index.html">Install Red Hat Edge Manager as Quadlets</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ch2-deploy/s1-quadlets.html">Red Hat Edge Manager Services and Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ch2-deploy/s2-install-lab.html">Lab: Install Red Hat Edge Manager Standalone</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../ch3-enroll/index.html">Add Edge Devices to Red Hat Edge Manager</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ch3-enroll/s1-enroll.html">Enroll Edge Devices in RHEM</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ch3-enroll/s2-enroll-lab.html">Lab: Enroll Edge Devices Using Late Binding</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../ch4-manage/index.html">Manage Edge Devices with Red Hat Edge Manager</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ch4-manage/s1-manage.html">Manage Edge Devices with Red Hat Edge Manager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ch4-manage/s2-manage-lab.html">Lab: Configure Edge Devices</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ch4-manage/s3-update-lab.html">Lab: Update Edge Devices</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../ch5-decomission/index.html">Remove Edge Devices from Red Hat Edge Manager</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ch5-decomission/s1-delete.html">Decommission and Delete Edge Devices with RHEM</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ch5-decomission/s2-delete-lab.html">Lab: Decommission and Delete Edge Devices</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Deploying Red Hat Edge Manager and Managing Edge Devices</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Deploying Red Hat Edge Manager and Managing Edge Devices</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../samples/1/index.html">samples</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../samples/1/index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Deploying Red Hat Edge Manager and Managing Edge Devices</a></li>
    <li><a href="index.html">Introduction to Red Hat Edge Manager</a></li>
    <li><a href="s3-classroom-lab.html">Lab: Prepare to Install Red Hat Edge Manager</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Lab: Prepare to Install Red Hat Edge Manager</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><em>Estimated reading time: <strong>5 minutes</strong>.</em></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Objective</dt>
<dd>
<p>Prepare the environment for deploying RHEM by verifying that you have access to all its artifacts.</p>
</dd>
</dl>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Work in progress
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_before_you_begin"><a class="anchor" href="#_before_you_begin"></a>Before you begin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You need a customer portal account with access to a Red Hat Enterprise Linux (RHEL) subscription.
It could be a <a href="https://developers.redhat.com/products/rhel/download">Red Hat Developer program</a> free subscription, if you use the <a href="https://github.com/flightctl/flightctl-rpm">upstream packages</a> from the <a href="https://github.com/flightctl/flightctl" target="_blank" rel="noopener">Flight Control</a> project.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Be aware that, as time passes, there might be significant differences between the upstream releases and the Red Hat product releases.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The GA release of RHEM requires a Red Hat Device Edge (RHDE) subscription and it is NOT included of the developer program individual subscription.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You need a <em>development machine</em> running RHEL, to which you have unrestricted sudo access, and enough capacity to run a few local VMs.</p>
</div>
<div class="paragraph">
<p>You also need a <em>server machine</em> running RHEL, to which you also have unrestricted sudo access.</p>
</div>
<div class="paragraph">
<p>Both your <em>development machine</em> and <em>server machine</em> require internet access to download RPM packages and container images.</p>
</div>
<div class="paragraph">
<p>If you are using the course classroom, your <em>development machine</em> is the <code>workstation</code> VM.
Log in as the user <code>student</code> with password <code>student</code>.
From that machine, you may start SSH sessions to the <code>servera</code> VM, which is your <em>server</em> machine, using the same user.
Alternatively, you can open a shell or a console directly on the <code>servera</code> VM.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_instructions"><a class="anchor" href="#_instructions"></a>Instructions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can adapt the instructions in this course to any environment where you can install RPM packages, run Podman containers, and create virtual machines using libvirt.
With a bit more effort, you could run everything on a Windows or MacOS workstation, using a single large VM running RHEL and nested virtualization, or a few smaller VMs, but this course does <strong>NOT</strong> provide instructions for doing so.</p>
</div>
<div class="paragraph">
<p>This course was tested using a Red Hat Learning Environment (ROL) classroom which was originally created for another quick course series.
There was no customization for the specific needs of RHEM, and there was no attempt at providing all requirements to install RHEM in disconnected mode.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Some of the requirements of RHEM can be satisfied by the existing RPM package and container image mirrors in the ROL classroom, but some of them require internet access, a valid Red Hat login, and Red Hat subscription entitlements.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This activity does NOT provide you with step-by-step instructions for operating the ROL environment.
It starts with a check list of tasks you need to know how to perform on ROL for this course, and then describes the customizations you require to be able to perform this course activities using the recommended HOL019 ROL clasroom.</p>
</div>
<div class="paragraph">
<p>Please check the on-line documentation available on ROL itself if it is your first time using a ROL classroom.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Access the graphical console of your <em>development machine</em>.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Ensure you can open the virtual console console of the <code>workstation</code> VM, which should be already logged in.
If you need to log in again, use the <code>student</code> user with the <code>student</code> password.</p>
</li>
<li>
<p>Ensure you can open a Firefox web browser on the <code>workstation</code> VM.</p>
</li>
<li>
<p>If you wish, you can open the termimal application and perform as tasks which require a Linux shell on the graphical console of the <code>workstation</code> VM, but most learners find that the classroom web application is more confortable, especially if you want to cut-and-paste commands and file names from the course contents to the shell.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Access the web application to get a shell on your <em>development machine</em>.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Ensure you can open the classroom web application and open a workstation shell.</p>
</li>
<li>
<p>Ensure you can escalate privileges by using the <code>sudo</code> command.
You do not require the <code>root</code> user password, because the <code>student</code> user has unrestricted access to`sudo`.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Open a terminal on your <em>server machine</em>.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If you have a shell on <code>workstation</code> VM, you can start a SSH session to the <code>servera</code> VM.
There is no need to specify the user because the <code>servera</code> VM is preconfigured with an SSH key for the <code>student</code> user.</p>
</li>
<li>
<p>Alternatively, you can open the virtual console of the <code>servera</code> VM, and then log in as the <code>student</code> user, with the <code>student</code> password.</p>
</li>
<li>
<p>As another alternative, the classroom web application can provide a shell on the <code>servera</code> VM, which is actually a SSH session from the <code>worstation</code> VM.</p>
</li>
</ol>
</div>
</li>
<li>
<p>For most activities in this course, you will need to keep three windows open:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>A <code>workstation</code> VM console, to use a web browser and access the RHEM web interface.</p>
</li>
<li>
<p>A <code>workstation</code> VM shell, to use the RHEM CLI and RHEL administrator commands.</p>
</li>
<li>
<p>A <code>servera</code> VM shell, to use RHEL administrator commands.</p>
</li>
</ol>
</div>
</li>
<li>
<p>On your <em>development machine</em>, download the sample code for this course.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Using a shell on your <em>development machine</em> (which is the <code>workstation VM</code>), ensure you are on your home directory.
All labs start from there, but they will use different work directories, so this course starts all labs from the same reference point.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>cd</strong></code></pre>
</div>
</div>
</li>
<li>
<p>Clone the course samples repository.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>git clone https://github.com/RedHatQuickCourses/rhde-rhem-samples.git</strong>
Cloning into 'rhde-rhem-samples'...
...</code></pre>
</div>
</div>
</li>
<li>
<p>The samples repository contains a number of subdirectories, but you will not make any changes directly on them.
All changes will be made to copies which you will create on temporary work directories.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>ls rhde-rhem-samples</strong>
LICENSE  README.md  antora.yml  config  enroll  modules  webapp</code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Install tools for managing containers and virtual machines on your <em>development machine</em>.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Install the <code>container-tools</code> meta-package.
Tough the <code>workstation</code> VM has Podman preinstalled, you will need the full suite of container tools in this course.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>sudo dnf install skopeo buildah</strong>
...
Complete!</code></pre>
</div>
</div>
</li>
<li>
<p>Install the libvirt tools and enable its QEMU socket service.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>sudo dnf install qemu-kvm libvirt virt-install virt-viewer</strong>
...
Complete!
$ <strong>sudo systemctl enable virtqemud.socket --now</strong>
Created symlink /etc/systemd/system/multi-user.target.wants/virtqemud.socket â†’ /usr/lib/systemd/system/virtqemud.socket.</code></pre>
</div>
</div>
</li>
<li>
<p>Check that your unprivileged user can connect using the libvirt session interface.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>virsh uri</strong>
qemu:///session
$ <strong>virsh nodeinfo</strong>
CPU model:           x86_64
...</code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Configure your <em>development machine</em> to access to RPM packages and container images from Red Hat, over the internet.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Register your <em>development machine</em> with the Red Hat subscription manager.</p>
<div class="paragraph">
<p>If you are using the upstream Flight Control packages, you can use the login from a free Red Hat Developer subscription for individuals.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>workstation</code> VM is preconfigured with access a private mirror containing RHEL 10 packages, but it will need RHEL 9 packages to build bootc container images for edge devices that will be managed by RHEM.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>sudo subscription-manager register</strong>
...
The registered system name is: workstation</code></pre>
</div>
</div>
</li>
<li>
<p>Log in on the Red Hat container registry.</p>
<div class="paragraph">
<p>Use the same Red Hat login that you used with subscription manager.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>podman login registry.redhat.io</strong>
...
Login Succeeded!</code></pre>
</div>
</div>
</li>
<li>
<p>Verify that you can access the bootc image builder container image.
You may get a different hash, because the container image was updated since these instructions were written.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>skopeo inspect --format '{{.Digest}}' docker://registry.redhat.io/rhel9/bootc-image-builder:9.6</strong>
sha256:f5e1860fae45c9d01fb612fcfad6c1d3a93e9ea4533bf01ea1c4d47ae2226580</code></pre>
</div>
</div>
</li>
<li>
<p>Download the bootc image builder to the container storage of the root user.</p>
<div class="paragraph">
<p>You will run bootc image builder as root, so you must log in again on the Red Hat container registry.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>sudo podman login registry.redhat.io</strong>
...
Login Succeeded!
$ <strong>podman pull docker://registry.redhat.io/rhel9/bootc-image-builder:9.6</strong>
...
Storing signatures
a93aa271855242ac292133fb261c2132dd88859abb7edc29fb5681d30db422f2</code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now your <em>development machine</em> ready to build bootc container images with RHEL 9 for edge devices, run local VMs as virtual edge devices, and access a Red Hat Edge Manager server which you will configure in this course and will manage those virtual edge devices.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_whats_next"><a class="anchor" href="#_whats_next"></a>What&#8217;s next</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the next lab, you will install and configure a RHEM server on your <em>server machine</em> and configure administrator and non-administrator users on the RHEM server.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="s1-architecture.html">Managing Edge Devices with Red Hat Edge Manager</a></span>
  <span class="next"><a href="../ch2-deploy/index.html">Install Red Hat Edge Manager as Quadlets</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
